---
- name: Verify creation of directories
  file:
    path: "{{ item }}"
    state: directory
    mode: 0755
  loop:
    - /etc/profile.d
    - "{{ ansible_facts.env.HOME }}/.config/cheat"
    - "{{ ansible_facts.env.HOME }}/.config/alacritty"

- name: Create symlinks for dotfiles
  file:
    src: "{{ playbook_dir }}/roles/dotfiles/files/{{ item.src }}"
    dest: "{{ item.dest }}"
    state: link
    force: true
  loop:
    - { src: ".zshrc", dest: "{{ ansible_facts.env.HOME }}/.zshrc" }
    - { src: ".spacecowboy.sh", dest: "{{ ansible_facts.env.HOME }}/.spacecowboy.sh" }
    - { src: ".zlogout", dest: "{{ ansible_facts.env.HOME }}/.zlogout" }
    - { src: ".p10k.zsh", dest: "{{ ansible_facts.env.HOME }}/.p10k.zsh" }
    - { src: ".gitconfig", dest: "{{ ansible_facts.env.HOME }}/.gitconfig" }
    - { src: ".aliases", dest: "{{ ansible_facts.env.HOME }}/.aliases" }
    - { src: ".dircolors", dest: "{{ ansible_facts.env.HOME }}/.dircolors" }
    - { src: ".flake8", dest: "{{ ansible_facts.env.HOME }}/.flake8" }
    - { src: ".tmux.conf", dest: "{{ ansible_facts.env.HOME }}/.tmux.conf" }
    - { src: "alacritty.yml", dest: "{{ ansible_facts.env.HOME }}/.config/alacritty/alacritty.yml" }
